(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{372:function(v,_,t){"use strict";t.r(_);var e=t(2),a=Object(e.a)({},(function(){var v=this,_=v.$createElement,t=v._self._c||_;return t("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[t("h2",{attrs:{id:"回流"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#回流"}},[v._v("#")]),v._v(" 回流")]),v._v(" "),t("h3",{attrs:{id:"什么是回流？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是回流？"}},[v._v("#")]),v._v(" 什么是回流？")]),v._v(" "),t("p",[v._v("当"),t("code",[v._v("Render Tree")]),v._v("中部分或全部元素的尺寸、结构、或某些属性发生改变时，"),t("strong",[v._v("浏览器重新渲染部分或全部文档的过程称为回流")]),v._v("。")]),v._v(" "),t("h3",{attrs:{id:"怎样会导致回流？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#怎样会导致回流？"}},[v._v("#")]),v._v(" 怎样会导致回流？")]),v._v(" "),t("p",[v._v("下面的内容会导致回流：")]),v._v(" "),t("ul",[t("li",[v._v("页面首次渲染")]),v._v(" "),t("li",[v._v("浏览器窗口大小发生改变")]),v._v(" "),t("li",[v._v("元素尺寸或位置发生改变")]),v._v(" "),t("li",[v._v("元素内容变化（文字数量或图片大小等）")]),v._v(" "),t("li",[v._v("元素字体大小变化")]),v._v(" "),t("li",[v._v("添加或删除可见的"),t("code",[v._v("DOM")]),v._v("元素")]),v._v(" "),t("li",[v._v("激活"),t("code",[v._v("CSS")]),v._v("伪类（例如："),t("code",[v._v(":hover")]),v._v("）")]),v._v(" "),t("li",[v._v("查询某些属性或调用某些方法")])]),v._v(" "),t("h2",{attrs:{id:"重绘"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重绘"}},[v._v("#")]),v._v(" 重绘")]),v._v(" "),t("h3",{attrs:{id:"什么是重绘？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#什么是重绘？"}},[v._v("#")]),v._v(" 什么是重绘？")]),v._v(" "),t("p",[v._v("当页面中元素样式的改变并不影响它在文档流中的位置时（例如："),t("code",[v._v("color")]),v._v("、"),t("code",[v._v("background-color")]),v._v("、"),t("code",[v._v("visibility")]),v._v("等），浏览器会将新样式赋予给元素并重新绘制它，这个过程称为重绘。")]),v._v(" "),t("h2",{attrs:{id:"性能对比"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#性能对比"}},[v._v("#")]),v._v(" 性能对比")]),v._v(" "),t("p",[v._v("回流比重绘的代价更高。")]),v._v(" "),t("p",[v._v("有时即使回流一个单一的元素，它的父元素以及任何跟随它的元素也会产生回流。")]),v._v(" "),t("h3",{attrs:{id:"浏览器对重绘和回流的优化"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#浏览器对重绘和回流的优化"}},[v._v("#")]),v._v(" 浏览器对重绘和回流的优化")]),v._v(" "),t("p",[v._v("现代浏览器会对频繁的回流和重绘操作进行优化：")]),v._v(" "),t("p",[v._v("浏览器会维护一个队列，把所有引起回流和重绘的操作放入队列中，如果队列中的任务数量或者时间间隔达到一个阈值，浏览器就会将队列清空，进行一次批处理，这样可以把多次回流和重绘变成一次。")]),v._v(" "),t("p",[v._v("当你访问一下属性或者方法时，浏览器会立刻清空队列：")]),v._v(" "),t("ul",[t("li",[t("code",[v._v("clientWidth clientHeight clientTop clientLeft")])]),v._v(" "),t("li",[t("code",[v._v("offsetWidth offsetHeight offsetTop offsetLeft")])]),v._v(" "),t("li",[t("code",[v._v("scrollWidth scrollHeight scrollTop scrollLeft")])]),v._v(" "),t("li",[t("code",[v._v("width height")])]),v._v(" "),t("li",[t("code",[v._v("getComputedStyle()")])]),v._v(" "),t("li",[t("code",[v._v("getBoundClientRect()")])])]),v._v(" "),t("p",[v._v("因为队列中可能会有影响到这些属性或方法返回值的操作，即使你希望获取的信息与队列中操作引发的改变无关，浏览器也会强行清空队列，确保你拿到的值是最精确的。")]),v._v(" "),t("h2",{attrs:{id:"如何减少回流和重绘的次数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#如何减少回流和重绘的次数"}},[v._v("#")]),v._v(" 如何减少回流和重绘的次数")]),v._v(" "),t("h3",{attrs:{id:"css"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#css"}},[v._v("#")]),v._v(" CSS")]),v._v(" "),t("ul",[t("li",[v._v("避免使用"),t("code",[v._v("table")]),v._v("布局")]),v._v(" "),t("li",[v._v("尽可能在"),t("code",[v._v("DOM")]),v._v("树的最末端改变"),t("code",[v._v("class")])]),v._v(" "),t("li",[v._v("避免设置多层内联样式")]),v._v(" "),t("li",[v._v("将动画效果应用到"),t("code",[v._v("position")]),v._v("属性为"),t("code",[v._v("absolute")]),v._v("或"),t("code",[v._v("fixed")]),v._v("的元素上")]),v._v(" "),t("li",[v._v("避免使用"),t("code",[v._v("CSS")]),v._v("表达式")])]),v._v(" "),t("h3",{attrs:{id:"javascript"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#javascript"}},[v._v("#")]),v._v(" JavaScript")]),v._v(" "),t("ul",[t("li",[v._v("避免频繁操作样式，最好一次性重写"),t("code",[v._v("style")]),v._v("属性，或者将样式列表定义为"),t("code",[v._v("class")]),v._v("并一次性更改"),t("code",[v._v("class")]),v._v("属性")]),v._v(" "),t("li",[v._v("避免频繁操作"),t("code",[v._v("DOM")]),v._v("，创建一个"),t("code",[v._v("documentFragment")]),v._v("，在它上面应用所有"),t("code",[v._v("DOM")]),v._v("操作，最后再把它添加到文档中")]),v._v(" "),t("li",[v._v("也可以先为元素设置"),t("code",[v._v("display:none")]),v._v("，操作结束后再把它显示出来。因为在"),t("code",[v._v("display")]),v._v("属性为"),t("code",[v._v("none")]),v._v("的元素上进行的"),t("code",[v._v("DOM")]),v._v("操作不会引发回流和重绘")]),v._v(" "),t("li",[v._v("避免频繁读取会引发回流和重绘的属性，如果确实需要多次使用，就用一个变量缓存起来")]),v._v(" "),t("li",[v._v("对具有复杂动画的元素使用绝对定位，使它脱离文档流，否则会引起父元素及后续元素频繁回流")])])])}),[],!1,null,null,null);_.default=a.exports}}]);